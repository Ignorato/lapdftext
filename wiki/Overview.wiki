#summary System Overview

= Installation Instructions =

The current version of LA-PDFText requires Java 1.6 in order to run and supports the following operating systems: 
  # MacOSX Snow Leapoard 10.6.7
  # Windows XP
  # Linux

Choose the installer meant for your operating system download it. Mac and windows users can run their installers by simply double-clicking the installer icon while Linux users can run the installer usig the command {{{java -jar <installername>}}}. The installer will take you through the steps and will ask you where you want the LA-PDFText application to be installed. The target directory where you choose to install the application will contain a folder called {{{sampleData}}}. This folder contains 2 sub-folders one with sample PDF files from the journal PLoS Biology and one with the output generated by LA-PDFText running on these PDF files. The rule files used for the block classification stage are provided under a folder called {{{rules/plos/}}}. 

== WARNING: ==
The current version of all the installers will mark the {{{sampleData}}} as read-only. So DO NOT use that directory as an output directory to hold the results of your LA-PDFtext run. [http://code.google.com/p/lapdftext/issues/detail?id=1]

= Usage =

Once installed you can run LA-PDFText in 2 modes: (1) as an application with a UI (2) as a command-line tool. The table below summarizes these capabilities across the three platforms.
||Version  ||1.0 &1.3   | ||  ||     1.6      ||
||         || UI || cmdLine || UI || cmdLine||
||MacOSX   ||yes || yes     || no || yes    ||
||WindowsXP||yes || no      || no || yes    || 
||Linux    ||yes || yes     || no || yes    ||


== Command Line Usage == 


Along with the MacOSX and Linux installations of LA-PDFText you will find a script called {{{./cl_LA-PDFText}}} in the install directory. This will allow you to run LA-PDFText according to the usage guidelines below. 



===Usage Guidelines===


====Blockifying PDF: ====
Use this option if you want to blockify the PDF and output the blocks XML.

Command: 
{{{./LA-PDFText blockify sampleData/plos/8_8 ~cartic/Desktop/screenshots/}}}


Arguments:
  * Argument 1: blockify
  * Argument 2: The directory path where the PDFs are located 
  * Argument 3: The directory path where output of blockify will be placed



====Blockifying PDF and reporting Features: ====

Use this option if you want to blockify the PDF and output the blocks XML and generate a report file that serves as a guide in crafting a rule file for the sectionify step.

Command: 
{{{./LA-PDFText blockStatistics sampleData/plos/8_8 ~cartic/Desktop/screenshots/}}}

Arguments:
  * Argument 1: blockStatistics
  * Argument 2: The directory path where the PDFs are located 
  * Argument 3: The directory path where output of blockify and the feature reports will be placed


====Blockifying and sectionifying PDF: ====

Use this option if you want to blockify the PDF and do rhetorical classification of the blocks.It will output an openAccess based XML

Command: 
{{{./LA-PDFText blockifyClassify sampleData/plos/8_8 rules/plosbiology/epoch_7Jun_8.drl ~cartic/Desktop/screenshots/}}}


Arguments:
  * Argument 1: blockifyClassify
  * Argument 2: The directory path where the PDFs are located
  * Argument 3: The path of the rule file for Drools 
  * Argument 4: The directory path where output of blockify and sectionify will be placed


===Writing rules for block classification ===
Starting with version 1.6 we have improved the mechanism to specify input rules for the classification of blocks. You can now enter rules are drools decision tables specified in an Excel spreadsheet. 
See [http://code.google.com/p/lapdftext/downloads/detail?name=epoch_7Jun_8.csv&can=2&q= downloads] for an example. 

Below is a snippet from a rule file included in the software distribution. The rules are in DROOLS syntax. [http://en.wikipedia.org/wiki/Drools]. The following snippet is taken from [http://code.google.com/p/lapdftext/downloads/detail?name=epoch_7Jun_8.drl&can=2&q=]. The rules in this file are meant specifically for a particular chronological range of documents with the PLoS biology journal. More specifically it is meant for all articles published in Volume 7 beginning in the month of June through to the end of Volume 8.

{{{
package edu.isi.bmkeg.pdf.classification.rules

import edu.isi.bmkeg.pdf.features.ChunkFeatures;
import edu.isi.bmkeg.pdf.model.ChunkBlock;

global ChunkBlock    chunk;

rule "Title"
	activation-group "blockClassification"
	salience 4
	when
		    ChunkFeatures(pageNumber==1)
	            ChunkFeatures(mostPopularFontSize==20)
		  
		    eval(chunk.getNumberOfLine()<=6)
		    ChunkFeatures(allignedMiddle==true)
		   
	then 
		chunk.setType(chunk.TYPE_TITLE);
		
end

rule "Authors"
	activation-group "blockClassification"
	salience 4
	when
		    ChunkFeatures(pageNumber==1)
		     ChunkFeatures(mostPopularFontSize==10)
		   
		    eval(chunk.getNumberOfLine()<=6)
		    ChunkFeatures(allignedMiddle==true)
		
		    features:ChunkFeatures()
		    eval(features.isMatchingRegularExpression("^(Summ|[Aa]bst|SUMM|ABST)")==false)
	then 
		chunk.setType(chunk.TYPE_AUTHORS);
		
end

rule "Header"
activation-group "blockClassification"
salience 4
	when
		
		 eval(chunk.getNumberOfLine()==1)
		 ChunkFeatures(containingFirstLineOfPage==true)
	then
		 chunk.setType(chunk.TYPE_HEADER);
end
}}}

From this example it is clear that LA-PDFText's code base contains a class that encapsulates features of chunk blocks detected in the block detection process. Here is a comprehensive list of ChunkFeatures you can use as antecedents of your drools rules.


  *  {{{int	getChunkTextLength() }}}
          returns the length of the text within a chunk 
  *  {{{double	getDensity() }}}
          returns the word block density in a chunk block
  *  {{{int	getHeightDifferenceBetweenChunkWordAndDocumentWord() }}}
          returns the difference between the most popular font size in the in the current chunk and the most popular font size in the document.
  *  {{{java.lang.String	getlastClassification() }}}
          returns the classification assigned to previous chunk block
  *  {{{int	getMostPopularFontSize() }}}
          returns the most popular font size in the chunk block
  *  {{{int	getPageNumber() }}}
          returns the page number where the block is located
  *  {{{java.lang.String	getSection() }}}
          returns the section lable of chunk
  *  {{{boolean	hasNeighboursOfType(java.lang.String type, int nsew) }}}
          returns true if chunk block has neighbors of specific type within specified distance
  *  {{{boolean	isAllCapitals() }}}
          returns true if chunk block contains mostly capitalized text
  *  {{{boolean	isAllignedLeft() }}}
          returns true if chunk block is left aligned
  *  {{{boolean	isAllignedMiddle() }}}
          returns true if chunk block is center aligned
  *  {{{boolean	isAllignedRight() }}}
          returns true if chunk block is right aligned
  *  {{{boolean	isAllignedWithColumnBoundaries() }}}
          returns true if the chunk block is aligned with column boundaries
  *  {{{boolean	isColumnCentered() }}}
          returns true if the chunk is a sinle column centered on the page else returns false
  *  {{{boolean	isContainingFirstLineOfPage() }}}
          returns true if chunk block contains the first line of a page's text
  *  {{{boolean	isContainingLastLineOfPage() }}}
          returns true if chunk block contains the last line of a page's text
  *  {{{boolean	isMatchingRegularExpression(java.lang.String regex) }}}
          returns true if the chunk block contains text that matches the input regex
  *  {{{boolean	isMostPopularFontModifierBold() }}}
          returns true if chunk block contains mostly bold face text
  *  {{{boolean	isMostPopularFontModifierItalic() }}}
          returns true if chunk block contains mostly italicized text
  *  {{{boolean	isOutlier() }}}
          returns true if chunk block is an outlier or stray block
 